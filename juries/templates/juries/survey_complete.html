{% extends 'juries/base.html' %}
{% load staticfiles %}


{% block content %}

<nav class="navbar navbar-expand-sm fixed-bottom panel justify-content-end">
	<button class="btn btn-lg btn-primary" id="continue">Continue when completed</button>
</nav>

<main class="flex-shrink-0" role="main">
	<section class="container">
		<h2>You're almost done &mdash; last step!</h2>

		<p class="big">This experiment evaluates the potential for "jury duty for the internet" as a way to help communities decide what content to show online.</p>

		<hr />

		<form class="survey question">
			<!-- Overall -->
			<div class="form-group">
				<label for="complete_pref">1. Which jury system did you <b>MOST PREFER</b> for making content moderation decisions?</label>

				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="complete_pref">
					<label class="btn btn-outline-warning"><input type="radio" name="options1" value="Round 1 ({{ group.round1 }})" autocomplete="off"> Round 1 ({{ group.round1 }})</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options1" value="Round 2 ({{ group.round2 }})" autocomplete="off"> Round 2 ({{ group.round2 }})</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options1" value="Round 3 ({{ group.round3 }})" autocomplete="off"> Round 3 ({{ group.round3 }})</label>
				</div>
			</div>

			<div class="form-group">
				<label for="complete_prefwhy">2. Why did you prefer that version?</label>
				<textarea rows="3" id="complete_prefwhy" placeholder="Enter explanation here"></textarea>
			</div>

			<div class="form-group">
				<label for="complete_nonpref">3. Which jury system did you <b>LEAST PREFER</b> for making content moderation decisions?</label>

				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="complete_nonpref">
						<label class="btn btn-outline-warning"><input type="radio" name="options2" value="Round 1 ({{ group.round1 }})" autocomplete="off"> Round 1 ({{ group.round1 }})</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options2" value="Round 2 ({{ group.round2 }})" autocomplete="off"> Round 2 ({{ group.round2 }})</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options2" value="Round 3 ({{ group.round3 }})" autocomplete="off"> Round 3 ({{ group.round3 }})</label>
				</div>
			</div>

			<div class="form-group">
				<label for="complete_nonprefwhy">4. Why did you least prefer that version?</label>
				<textarea rows="3" id="complete_nonprefwhy" placeholder="Enter explanation here"></textarea>
			</div>

		<div class="form-group">
			<label for="complete_participate">5. If this feature was rolled out on the social media platforms that you currently use, how likely would be to participate? Select all that apply.</label>

			<div class="d-flex flex-wrap justify-content-start">
				<label class="btn btn-outline-warning">
					<input type="checkbox" autocomplete="off" id="complete_participate0"> Yes, I would volunteer for it
				</label>

				<label class="btn btn-outline-warning">
					<input type="checkbox" autocomplete="off"  id="complete_participate1"> Yes, if I'm bored/have free time
				</label>

				<label class="btn btn-outline-warning">
					<input type="checkbox" autocomplete="off"  id="complete_participate2"> Yes, if I'm paid for my time
				</label>

				<label class="btn btn-outline-warning">
					<input type="checkbox" autocomplete="off" id="complete_participate3"> Yes, if it's mandatory
				</label>

				<label class="btn btn-outline-warning">
					<input type="checkbox" autocomplete="off"  id="complete_participate4"> Not likely at all
				</label>
			</div>

			<hr />

			<h3>Enforcing your decisions</h3>

			<div class="form-group">
				<label for="complete_enf_rec">6. Imagine that this jury's decisions were given to the social media platform as a <span class="yellow">recommendation</span> (taken into advisement by policy teams, but no action required). How satisfied would you feel with this process?</label>

				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="complete_enf_rec">
					<label class="btn btn-outline-warning"><input type="radio" name="options3" value="1" autocomplete="off"> Not at all</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options3" value="2" autocomplete="off"> A Little</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options3" value="3" autocomplete="off"> Moderately</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options3" value="4" autocomplete="off"> Somewhat</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options3" value="5" autocomplete="off"> Very Much</label>
				</div>
			</div>


			<div class="form-group">
				<label for="complete_enf_enf">7. Imagine that this jury's decisions were given to the social media platform as an <span class="yellow">enforced decision</span> (taken as binding action by policy teams and directly implemented). How satisfied would you feel with this process?</label>

				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="complete_enf_enf">
				<label class="btn btn-outline-warning"><input type="radio" name="options4" value="1" autocomplete="off"> Not at all</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options4" value="2" autocomplete="off"> A Little</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options4" value="3" autocomplete="off"> Moderately</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options4" value="4" autocomplete="off"> Somewhat</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options4" value="5" autocomplete="off"> Very Much</label>
					</div>
			</div>

			<div class="form-group">
				<label for="complete_enf_why">8. Please explain your reasoning for the above.</label>
				<textarea rows="3" id="complete_enf_why" placeholder="Enter explanation here"></textarea>
			</div>

			<div class="form-group">
				<label for="complete3">9. How important is it to you that your opinions are factored into decisions?</label>
				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="complete3">
				<label class="btn btn-outline-warning"><input type="radio" name="options5" value="1" autocomplete="off"> Not at all</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options5" value="2" autocomplete="off"> A Little</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options5" value="3" autocomplete="off"> Moderately</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options5" value="4" autocomplete="off"> Somewhat</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options5" value="5" autocomplete="off"> Very Much</label>
					</div>
			</div>

			<hr />

			<h3>About this Experiment</h3>

			<!-- Content Moderation -->
			<div class="form-group">
				<label for="confidence2">10. How confident are you in your abilities to decide what content should be on a platform like Facebook?</label>

				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="confidence2">
						<label class="btn btn-outline-warning"><input type="radio" name="options6" value="1" autocomplete="off"> Not at all</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options6" value="2" autocomplete="off"> A Little</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options6" value="3" autocomplete="off"> Moderately</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options6" value="4" autocomplete="off"> Somewhat</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options6" value="5" autocomplete="off"> Very Much</label>
				</div>
			</div>

			<div class="form-group">
				<label for="complete_familiarity">11. How familiar were you with content moderation before this experiment?</label>

				<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group" id="complete_familiarity">
					<label class="btn btn-outline-warning"><input type="radio" name="options7" value="1" autocomplete="off"> Not at all</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options7" value="2" autocomplete="off"> A Little</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options7" value="3" autocomplete="off"> Moderately</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options7" value="4" autocomplete="off"> Somewhat</label>
					<label class="btn btn-outline-warning"><input type="radio" name="options7" value="5" autocomplete="off"> Very Much</label>
				</div>
			</div>


			<!-- Concluding -->
			<hr />
			<div class="form-group">
				<label for="complete_comments">12. Do you have any other thoughts or concerns?<label>
				<textarea rows="3" id="complete_comments"></textarea>
			</div>

		  <div class="form-group">
				 <label for="email">13. Email address (optional)</label>
				 <input type="text" class="form-control" id="email" placeholder="email@example.com">
				 <small>Please leave your email address if you are open to the researchers contacting you with follow-up questions about this experiment. If you are selected for a follow-up conversation, you will be compensated with a $25 Amazon gift card.</small>
		  </div>

			<!-- <button type="submit" class="btn btn-primary" id="submit">Submit</button> -->
		</form>
	</section>

</main>

{% endblock %}

{% block js %}

<script>

var id = getParameterByName('id');
var group = getParameterByName('group');

	$('#continue').on('click', function() {

		var complete_pref = $('#complete_pref input[name=options1]:checked').val();
		var complete_prefwhy = $('#complete_prefwhy').val();
		var complete_nonpref = $('#complete_nonpref input[name=options2]:checked').val();
		var complete_nonprefwhy = $('#complete_nonprefwhy').val();
		var complete_participate0 = $('#complete_participate0').is(':checked');
		var complete_participate1 = $('#complete_participate1').is(':checked');
		var complete_participate2 = $('#complete_participate2').is(':checked');
		var complete_participate3 = $('#complete_participate3').is(':checked');
		var complete_participate4 = $('#complete_participate4').is(':checked');
		
		var complete_enf_rec = $('#complete_enf_rec input[name=options3]:checked').val();
		var complete_enf_enf = $('#complete_enf_enf input[name=options4]:checked').val();
		var complete_enf_why = $('#complete_enf_why').val();
		var complete3 = $('#complete3 input[name=options5]:checked').val();
		var complete_confidence = $('#confidence2 input[name=options6]:checked').val();
		var complete_familiarity = $('#complete_familiarity input[name=options7]:checked').val();
		var complete_comments = $('#complete_comments').val();
		var email = $('#email').val();
		
		if ($('#complete_pref input[name=options1]:checked').val() == undefined || 
			$('#complete_prefwhy').val() == '' ||
			$('#complete_nonpref input[name=options2]:checked').val() == undefined ||
			$('#complete_nonprefwhy').val() == '' ||
			$('#complete_enf_rec input[name=options3]:checked').val() == undefined ||
			$('#complete_enf_why').val() == '' ||
			$('#complete3 input[name=options5]:checked').val() == undefined ||
			$('#confidence2 input[name=options6]:checked').val() == undefined ||
			$('#complete_familiarity input[name=options7]:checked').val() == undefined) {
			alert('Sorry, please answer all of the questions before continuing.');
		} else {
		
	
			var csrf = $('#csrf').text();
			var data = {csrfmiddlewaretoken: csrf,
						complete_pref: complete_pref,
						complete_prefwhy: complete_prefwhy,
						complete_nonpref: complete_nonpref,
						complete_nonprefwhy: complete_nonprefwhy,
						complete_participate0: complete_participate0,
						complete_participate1: complete_participate1,
						complete_participate2: complete_participate2,
						complete_participate3: complete_participate3,
						complete_participate4: complete_participate4,
						complete_enf_rec: complete_enf_rec,
						complete_enf_enf: complete_enf_enf,
						complete_enf_why: complete_enf_why,
						complete3: complete3,
						complete_confidence: complete_confidence,
						complete_familiarity: complete_familiarity,
						complete_comments: complete_comments,
						email: email,
						id: id};
			$.ajax({
				type: 'POST',
				url: '/completesurvey_post',
				data: data,
				success: function(data) {
					// $('#continue').prop('disabled', false);
					// $('#continue').removeClass('btn-secondary');
					// $('#continue').addClass('btn-primary');
					// $('#continue').on('click', function() {
						window.location = '/thankyou?id=' + id + '&group=' + group;
					// });
				}
			});
		}
		return false;
	});

</script>

{% endblock %}
